# Домашние задания по модулю "Базы данных"

Необходимо развернуть БД PostgreSQL для сервиса Loms. Реализовать слой Repository, в котором будут походы в БД

## Основное задание

1. Для сервиса loms реализовать в слое Repository поход в БД
2. Развернуть экземпляр БД PostgreSQL в отдельном контейнере
3. В коде должен быть хотя бы один пример транзакции, состоящей из нескольких последовательных SQL запросов
4. Реализовать автоматические миграции, накатывающие схему БД и/или тестовые данные
5. SQL код должен быть написан в виде raw. Без использования ORM или билдеров (можно sqlc)

## Дополнительное задание

1. Для БД поднять синхронную реплику. Балансировать read/write запросы между ними (write только в master, read в любую из реплик)
2. Написать по одному интеграционному тесту на каждый SQL запрос в репозитории сервиса Loms. Не забыть накатывать тестовые данные в миграции, после прогона тестов - удалить данные из БД
3. Реализовать SQL-запросы с помощью sqlc

## Миграции
В ci-cd пайплайне определена переменная окружения:
```
variables:
  MIGRATION_DIR: "./loms/migrations"
```
в которой определен путь до папки миграций в сервисе loms. Используюте эту переменную в loms/Makefile
```
run-migrations:
  goose -dir "${MIGRATION_DIR}" postgres ...
```

### Дедлайны сдачи и проверки задания:
- 15 марта 23:59 (сдача) / 18 марта, 23:59 (проверка)
